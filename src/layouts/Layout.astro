---
import Footer from "../components/Footer.astro";
import Head from "../components/Head.astro";
import "../styles/global.css";
---

<!doctype html>
<html lang="pt-BR">
  <Head />
  <body class="flex flex-col app-bg-color min-h-dvh">
    <main id="content" class="flex flex-col grow">
      <slot />
    </main>
    <Footer />
    <script>
      (() => {
        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (prefersReduced || typeof IntersectionObserver === 'undefined') {
          document.querySelectorAll('.reveal').forEach((el) => {
            el.classList.add('in-view');
          });
          return;
        }

        const observer = new IntersectionObserver(
          (entries) => {
            for (const entry of entries) {
              if (entry.isIntersecting) {
                entry.target.classList.add('in-view');
                observer.unobserve(entry.target);
              }
            }
          },
          { rootMargin: '0px 0px -10% 0px', threshold: 0.1 }
        );

        document.querySelectorAll('.reveal').forEach((el) => observer.observe(el));
      })();
    </script>
  </body>
</html>
